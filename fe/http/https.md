# https

## SSL握手
1. 交换协议版本号
2. 选择一个两端都了解的密码
3. 对两端的身份认证
4. 产生临时的会话密钥

## 步骤
1. 客户端发起一个SSL连接，发送自己可选择的密码，协议版本等具体信息。
2. 服务端从中选择合适的参数，发回给客户端。
3. 服务端发送自己的证书给客户端。
4. 客户端验证证书有效性。
5. 客户端发送交换密钥的信息。
6. 两端生成临时密钥。
7. 交换公钥。

## https的通信
在http和tcp之间多了SSL层，它会将HTTP报文加密，再交给tcp。同理，服务端在SSL层解密，再交给http层。

## 通过代理的https流量
如果遇到只能转发http流量的代理时，它无法为你转发https流量。这时候，我们就要用到HTTPS SSL隧道协议。

客户端首先告诉代理，它想要连接的安全主机和端口，利用http的CONNECT方法来发送明文形式的端点信息，CONNECT方法会告诉代理打开一条到所期望主机和端口号的连接。这项工作完成之后，直接在客户端和服务端之间以隧道的形式传输数据。